<button mat-icon-button class="permissions" matTooltip="Resource permissions" matTooltipPosition="above"
    (click)="toggleMenu()" #infoButton="cdkOverlayOrigin" cdkOverlayOrigin>
    <mat-icon>lock</mat-icon>
</button>

<ng-template cdkConnectedOverlay [cdkConnectedOverlayBackdropClass]="'cdk-overlay-transparent-backdrop'"
    [cdkConnectedOverlayHasBackdrop]="true" [cdkConnectedOverlayOrigin]="infoButton" [cdkConnectedOverlayOpen]="isOpen"
    (backdropClick)="isOpen = false">
    <div class="overlay-info-box">
        <table>
            <tr>
                <th class="first-col">Permissions</th>
                <th *ngFor="let dp of defaultPermissions">
                    <mat-icon [matTooltip]="dp.label" matTooltipPosition="above">
                        {{dp.icon}}
                    </mat-icon>
                </th>
            </tr>
            <tr *ngFor="let item of listOfPermissions">
                <td class="first-col">{{item.group.split(':')[1] | titleFromCamelCase}}</td>
                <td *ngFor="let dp of defaultPermissions">
                    <mat-icon class="status" [class.checked]="getStatus(dp.name, item.restriction)"
                        [matTooltip]="dp.label" matTooltipPosition="above">
                        {{getStatus(dp.name, item.restriction) ? 'radio_button_checked' : 'radio_button_unchecked'}}
                    </mat-icon>
                </td>
            </tr>
            <tr *ngIf="userHasPermission && usersRestrictions" class="border-top">
                <td class="first-col">Your permissions</td>
                <td *ngFor="let dp of defaultPermissions">
                    <mat-icon class="status" [class.checked]="getStatus(dp.name, usersRestrictions)"
                        [matTooltip]="dp.label" matTooltipPosition="above">
                        {{getStatus(dp.name, usersRestrictions) ? 'radio_button_checked' : 'radio_button_unchecked'}}
                    </mat-icon>
                </td>
            </tr>
        </table>
    </div>
</ng-template>
