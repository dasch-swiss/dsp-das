<div class="toolbar">
  <div class="icon-container">
    <div
      class="clickable-icon"
      data-cy="more-vert-image-button"
      [matMenuTriggerFor]="more"
      [matTooltip]="'resourceEditor.representations.stillImage.more' | translate"
      matTooltipPosition="above">
      <mat-icon>more_vert</mat-icon>
    </div>

    <div
      class="clickable-icon"
      data-cy="still-image-share-button"
      [matMenuTriggerFor]="share"
      [class.disabled]="isReadStillImageExternalFileValue"
      [matTooltip]="'resourceEditor.representations.stillImage.share' | translate"
      matTooltipPosition="above">
      <mat-icon>share</mat-icon>
    </div>

    <div
      class="clickable-icon"
      data-cy="still-image-download-button"
      [matTooltip]="'resourceEditor.representations.stillImage.download' | translate"
      [class.disabled]="isReadStillImageExternalFileValue || !userCanView"
      (click)="download()">
      <mat-icon>download</mat-icon>
    </div>

    @if ((resourceFetcherService.userCanEdit$ | async) && !isReadStillImageExternalFileValue) {
    <div
      class="clickable-icon"
      data-cy="still-image-region-button"
      matTooltip="{{ 'resourceEditor.representations.stillImage.createAnnotation' | translate }}"
      (click)="toggleDrawMode()"
      [class.active]="osd.drawing">
      <mat-icon svgIcon="draw_region_icon" />
    </div>
    }
  </div>

  @if (compoundMode) {
  <app-compound-navigation />
  }

  <div class="icon-container">
    <div
      class="clickable-icon"
      data-cy="still-image-settings-button"
      [matTooltip]="'resourceEditor.representations.stillImage.settings' | translate"
      [matMenuTriggerFor]="settings"
      [class.disabled]="isReadStillImageExternalFileValue">
      <mat-icon>settings</mat-icon>
    </div>

    <div
      class="clickable-icon"
      data-cy="zoom-out"
      [matTooltip]="'resourceEditor.representations.stillImage.zoomOut' | translate"
      (click)="osd.zoom(-1)">
      <mat-icon>zoom_out</mat-icon>
    </div>

    <div
      class="clickable-icon"
      data-cy="zoom-in"
      [matTooltip]="'resourceEditor.representations.stillImage.zoomIn' | translate"
      (click)="osd.zoom(1)">
      <mat-icon>zoom_in</mat-icon>
    </div>

    <div
      class="clickable-icon"
      data-cy="zoom-reset"
      [matTooltip]="'resourceEditor.representations.stillImage.resetZoom' | translate"
      (click)="osd.viewer.viewport.goHome()">
      <mat-icon>other_houses</mat-icon>
    </div>

    <div
      class="clickable-icon"
      data-cy="fullscreen"
      [matTooltip]="'resourceEditor.representations.stillImage.openInFullscreen' | translate"
      (click)="osd.viewer.setFullScreen(true)">
      <mat-icon>fullscreen</mat-icon>
    </div>
  </div>
</div>

<mat-menu #more="matMenu" class="representation-menu">
  <a class="menu-content" mat-menu-item [href]="imageFileValue.fileUrl" target="_blank" data-cy="open-iiif-new-tab">
    {{ 'resourceEditor.representations.stillImage.openIiifInNewTab' | translate }}
  </a>
  @if (resourceFetcherService.userCanEdit$ | async) {
  <button class="menu-content" data-cy="replace-image-button" mat-menu-item (click)="replaceImage()">
    {{ 'resourceEditor.representations.replaceFile' | translate }}
  </button>
  }
</mat-menu>

<mat-menu #share="matMenu" class="res-share-menu">
  <button
    mat-menu-item
    (click)="notification.openSnackBar(_translateService.instant('resourceEditor.representations.stillImage.iiifUrlCopied'))"
    [cdkCopyToClipboard]="imageFileValue.fileUrl"
    data-cy="copy-iiif-url">
    <mat-icon>content_copy</mat-icon>
    {{ 'resourceEditor.representations.stillImage.copyIiifUrl' | translate }}
  </button>
  <button
    mat-menu-item
    [cdkCopyToClipboard]="imageFileValue.arkUrl"
    (click)="notification.openSnackBar(_translateService.instant('resourceEditor.representations.stillImage.arkUrlCopied'))"
    data-cy="copy-ark-url">
    <mat-icon>content_copy</mat-icon>
    {{ 'resourceEditor.representations.stillImage.copyArkUrl' | translate }}
  </button>
</mat-menu>
<mat-menu #settings="matMenu" class="settings-menu">
  <button class="menu-content" data-cy="jpg-button" mat-menu-item (click)="imageIsPng.emit(false)">
    @if (!isPng) {
    <mat-icon>check</mat-icon>
    } JPG
  </button>
  <button mat-menu-item data-cy="png-button" (click)="imageIsPng.emit(true)">
    @if (isPng) {
    <mat-icon>check</mat-icon>
    } PNG
  </button>
</mat-menu>
