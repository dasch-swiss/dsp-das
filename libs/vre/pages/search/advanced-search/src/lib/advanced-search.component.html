<div class="advanced-search-container">
  <div class="advanced-search-header">
    <h2>{{ 'pages.search.advancedSearch.title' | translate }}</h2>
    <button
      [disabled]="!previousSearchService.hasPreviousSearch()"
      mat-stroked-button
      color="primary"
      (click)="loadPreviousSearch()">
      {{ 'pages.search.advancedSearch.usePreviousSearch' | translate }}
    </button>
  </div>
  <app-ontology-form class="advanced-search-item" *ngIf="(ontologies$ | async).length" />
  <app-resource-value
    [availableResources]="resourceClasses$ | async"
    (selectedResourceChange)="onSelectedResourceClassChanged($event)"
    class="advanced-search-item" />
  <mat-progress-bar mode="query" *ngIf="(ontologyLoading$ | async) === true" class="advanced-search-item" />
  <div class="advanced-search-content" *ngIf="(ontologyLoading$ | async) === false">
    <app-statement-builder [statementElements]="searchState.statementElements$ | async"></app-statement-builder>
    <div class="advanced-search-bottom-selections advanced-search-item">
      <app-order-by />
      <div class="action-buttons">
        <button mat-button mat-stroked-button color="primary" (click)="resetSearch()">Reset</button>
        <button
          mat-button
          mat-raised-button
          color="primary"
          [disabled]="(searchState.isFormStateValid$ | async) === false"
          (click)="doSearch()">
          Search
        </button>
      </div>
    </div>
  </div>
</div>
