<div class="property-info">
  <div class="upper-prop-container">
    <div mat-line class="prop-label">
      <div>
        <span class="label" data-cy="property-label">{{ propDef.label ? propDef.label : propDef.id }} </span>
        <span class="additional-info" *ngIf="propAttribute" [innerHTML]="'&rarr;&nbsp;' + propAttribute"></span>
      </div>
    </div>
    <div class="edit-menu" *ngIf="(active || menuOpen) && (isAdmin$ | async) === true">
      <mat-icon
        [matMenuTriggerFor]="classInfoMenu"
        (menuOpened)="menuOpen = true"
        (menuClosed)="menuOpen = false"
        class="menu-icon-button"
        (click)="canBeRemovedFromClass()"
        >more_vert</mat-icon
      >
    </div>
  </div>
  <div mat-line class="lower-prop-container">
    <span class="mat-caption"> {{ propDef.id | split: '#':1 }} </span>
    <span>
      <app-cardinality
        [disabled]="(isAdmin$ | async) !== true"
        [cardinality]="propCard.cardinality"
        [classIri]="resourceClass.id"
        [propertyInfo]="{ propDef: this.propDef, propType: this.propType }"
        (cardinalityChange)="updateCardinality($event)"></app-cardinality>
    </span>
  </div>
</div>

<mat-menu #classInfoMenu="matMenu">
  <div class="remove-menu-wrapper">
    <button mat-menu-item [disabled]="!propCanBeRemovedFromClass" (click)="removePropertyFromClass()">
      <mat-icon>link_off</mat-icon>
      <span>remove property from class</span>
    </button>
    <button mat-menu-item (click)="openEditProperty()">
      <mat-icon>edit</mat-icon>
      <span>Edit property</span>
    </button>
  </div>
</mat-menu>
