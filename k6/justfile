appUrl := "https://app.dev.dasch.swiss"

# List all the available targets
default:
    @just --list

# Run the test locally
run:
    APP_URL={{appUrl}} k6 run tests/first-page-load.js

# Run the test in k6 cloud
run-cloud:
    APP_URL={{appUrl}} k6 cloud tests/first-page-load.js

# start grafana
grafana-up:
    docker-compose up -d
    open http://localhost:3000/dashboard/new?orgId=1
    cat ./grafana_dashboard.json | pbcopy

# stop grafana
grafana-down:
    docker-compose down

# run the test and export to local grafana
run-grafana:
    K6_OUT=influxdb=http://localhost:8086/k6 APP_URL={{appUrl}} k6 run ./tests/first-page-load.js

